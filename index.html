<!DOCTYPE html>

<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>Онлайн-табло — Аэропорт</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Open Sans -->

  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,400;1,400&display=swap" rel="stylesheet">

  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: 'Open Sans', system-ui, -apple-system, sans-serif;
      color: #1f2937;
      background: #ffffff;
    }

    .container { max-width: 1200px; margin: 0 auto; padding: 32px 24px; }

    h1 { font-size: 48px; font-weight: 400; margin: 0 0 32px; }

    .tabs {
      display: flex;
      gap: 24px;
      margin-bottom: 24px;
      font-size: 20px;
    }

    .tab.active {
      border-bottom: 3px solid #22c55e;
      padding-bottom: 6px;
    }

    .filters {
      display: flex;
      gap: 16px;
      align-items: center;
      margin-bottom: 16px;
    }

    .filters input {
      padding: 14px 16px;
      border-radius: 999px;
      border: 1px solid #e5e7eb;
      min-width: 260px;
    }

    .search-btn {
      padding: 14px 24px;
      border-radius: 999px;
      border: none;
      background: #22c55e;
      color: #fff;
      font-size: 16px;
      cursor: pointer;
    }

    .archive-toggle {
      color: #22c55e;
      cursor: pointer;
      margin-bottom: 12px;
      display: inline-block;
    }

    .table-head, .flight {
      display: grid;
      grid-template-columns: 120px 1.5fr 1fr 1.5fr 1fr 1.5fr;
      align-items: center;
      padding: 18px 0;
    }

    .table-head {
      background: #e9f8ee;
      border-radius: 999px;
      padding: 18px 24px;
      font-weight: 400;
    }

    .flight {
      padding: 24px 24px;
      border-bottom: 1px solid #e5e7eb;
    }

    .time old { text-decoration: line-through; color: #9ca3af; margin-left: 8px; }

    .city { font-size: 20px; }

    .status {
      background: #f3f4f6;
      border-radius: 999px;
      padding: 8px 16px;
      display: inline-block;
      font-size: 14px;
    }

    .empty {
      padding: 48px;
      text-align: center;
      color: #6b7280;
    }

    @media (max-width: 900px) {
      .table-head, .flight {
        grid-template-columns: 1fr;
        gap: 8px;
      }
    }
  </style>

</head>
<body>

<div class="container">
  <h1>Онлайн-табло</h1>

  <div class="tabs">
    <div class="tab active">Вылет</div>
    <div class="tab" style="opacity:.3">Прилёт</div>
  </div>

  <div class="filters">
    <input placeholder="Сегодня" disabled>
    <input placeholder="Любое время" disabled>
    <input placeholder="Поиск по номеру рейса, городу и авиакомпании">
    <button class="search-btn">Искать</button>
  </div>

  <div class="archive-toggle show-archive">Показать вылетевшие ▾</div>

  <div class="table-head">
    <div>Вылет</div><div>Направление</div><div>Рейс</div><div>Авиакомпания</div><div>Выход</div><div>Статус</div>
  </div>

  <div class="flights"></div>
</div>

<script>
  let showArchive = false;

  const flights = [
    {
      time: '17:30',
      city: 'Москва / ШРМ',
      flight: 'SU-1209',
      airline: 'Аэрофлот',
      gate: '1, 2 / 1',
      statuses: [
        { from: '16:50', text: 'Регистрация' },
        { from: '17:15', text: 'Посадка' },
        { from: '17:35', text: 'Вылетел' }
      ]
    },
    {
      time: '18:10',
      city: 'Стамбул',
      flight: 'A4-3069',
      airline: 'Азимут',
      gate: '8 / 2',
      statuses: [
        { from: '17:20', text: 'Регистрация' },
        { from: '17:50', text: 'Посадка' },
        { from: '18:20', text: 'Вылетел' }
      ]
    }
  ];

  function getSaratovTime() {
    return new Date(new Date().toLocaleString('en-US', { timeZone: 'Europe/Saratov' }));
  }

  function timeToMinutes(t) {
    const [h, m] = t.split(':').map(Number);
    return h * 60 + m;
  }

  function getStatus(flight, nowMin) {
    let current = null;
    flight.statuses.forEach(s => {
      if (nowMin >= timeToMinutes(s.from)) current = s.text;
    });
    return current || 'Ожидание';
  }

  function createFlightRow(f, status) {
    const row = document.createElement('div');
    row.className = 'flight';
    row.innerHTML = `
      <div class="time">${f.time}</div>
      <div class="city">${f.city}</div>
      <div>${f.flight}</div>
      <div>${f.airline}</div>
      <div>${f.gate}</div>
      <div><span class="status">${status}</span></div>
    `;
    return row;
  }

  function renderFlights() {
    const container = document.querySelector('.flights');
    container.innerHTML = '';

    const now = getSaratovTime();
    const nowMin = now.getHours() * 60 + now.getMinutes();

    let visible = 0;

    flights.forEach(f => {
      const status = getStatus(f, nowMin);
      const isDeparted = status === 'Вылетел' || status === 'Посадка окончена';
      if (isDeparted && !showArchive) return;
      visible++;
      container.appendChild(createFlightRow(f, status));
    });

    if (visible === 0 && !showArchive) {
      showArchive = true;
      renderFlights();
      return;
    }

    if (visible === 0) {
      container.innerHTML = '<div class="empty">На данный момент вылетов нет</div>';
    }
  }

  document.querySelector('.show-archive').onclick = () => {
    showArchive = !showArchive;
    document.querySelector('.show-archive').textContent = showArchive
      ? 'Скрыть вылетевшие ▴'
      : 'Показать вылетевшие ▾';
    renderFlights();
  };

  renderFlights();
  setInterval(renderFlights, 60000);
</script>

</body>
</html>
